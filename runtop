#/usr/bin/perl

use strict;
use warnings;

my $file = $ARGV[0] or die "Usage: $0 [filename to compile (.cpp suffix)] [c]\n";

my $clear = 0;
if (scalar @ARGV == 2 && $ARGV[1] eq 'c') {
    $clear = 1;
}

my ($name, undef) = split /\./, $file, 2;

my $res = `g++ -Wall -O2 $file && ./a.out`;

if ($clear) {
  $res = `rm *~`;
  $res = `rm '\#*'`;
}
